<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { (function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",
d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="//www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/4edc19/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/libby8dev/fignition","deleted":false,"title":"fignition","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation","deleted":false,"title":"Documentation","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation/understand-it","deleted":false,"title":"Understand It","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation/understand-it/bytecodes","deleted":false,"title":"Forth Execution (Advanced Topic)","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/4edc19/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":true,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://1318837862-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"Libby8dev","jot2atari":{"eligibility":"ineligible"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"oAuthForChartsApi":true,"moreMobileStyleImprovements":null,"googleChartsOverGstatic":false,"picasaAlbumInsert":false,"subscriptionDataMigrationInProgress":false,"enableJot2Atari":true,"plusBadge":false},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/libby8dev/fignition/documentation/understand-it/bytecodes\u0026service\u003djotspot","analyticsAccountId":"UA-10916122-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/4edc19/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/4edc19/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/4edc19/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/trogedit.css","/site/libby8dev/_/rsrc/1560928646000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/codeeditor.css","/site/libby8dev/_/rsrc/1560928646000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/libby8dev","name":"libby8dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":false,"isPageDraft":null,"parentPath":"/fignition/documentation/understand-it","parentWuid":"wuid:gx:7d5cfdd7f93f09f8","siteLocale":"en_GB","timeZone":"Australia/Sydney","type":"text","title":"Forth Execution (Advanced Topic)","locale":"en","wuid":"wuid:gx:74246869e26d7e79","revision":12,"path":"/fignition/documentation/understand-it/bytecodes","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"bytecodes","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":0,"onePickToken":"000770F203D951B73D4861E2721B16E13EF5E47ECC683DCCF4::1562360830271","guest_":false,"displayNameOrEmail":"Steve Justin","userName":"stevejustin1963","uid":"12267405931756516888","domainUser":false,"renderMobile":false,"domain":null,"namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"stevejustin1963@gmail.com","hasAdminAccess":false},"gadgets":{"baseUri":"/site/libby8dev/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Forth Execution (Advanced Topic) - Libby8dev" />
<meta itemprop="name" content="Forth Execution (Advanced Topic) - Libby8dev" />
<meta property="og:title" content="Forth Execution (Advanced Topic) - Libby8dev" />
<meta name="description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<meta itemprop="description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<meta id="meta-tag-description" property="og:description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/4edc19/system/app/themes/tron/standard-css-tron-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/site/libby8dev/_/rsrc/1560928646000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/libby8dev/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Forth Execution (Advanced Topic) - Libby8dev</title>
<meta itemprop="image" content="https://sites.google.com/site/libby8dev/_/rsrc/1388837284534/fignition/documentation/understand-it/bytecodes/ByteCodes.png" />
<meta property="og:image" content="https://sites.google.com/site/libby8dev/_/rsrc/1388837284534/fignition/documentation/understand-it/bytecodes/ByteCodes.png" />
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en_GB            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2><a href="https://sites.google.com/site/libby8dev/" dir="ltr" id="sites-chrome-userheader-title">Libby8dev</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/site/libby8dev/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList" class="has-expander"><li class="topLevel nav-first parent " wuid="gx:5e6ced805bd72d67"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/home" jotId="wuid:gx:5e6ced805bd72d67" class="sites-navigation-link topLevel">Home</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/intro" jotId="wuid:gx:3c9f58ed9b65663" class="sites-navigation-link">Intro</a></div></li></ul></li><li class="topLevel parent " wuid="gx:73afab7deeb502b4"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/fignition" jotId="wuid:gx:73afab7deeb502b4" class="sites-navigation-link topLevel">fignition</a></div><ul role="navigation" class="has-expander"><li class="parent " wuid="gx:7c694f1034e72915"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation" jotId="wuid:gx:7c694f1034e72915" class="sites-navigation-link">Documentation</a></div><ul role="navigation" class="has-expander"><li class="parent closed " wuid="gx:1f47cdb1dd9bbec2"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/build-it-rev-d" jotId="wuid:gx:1f47cdb1dd9bbec2" class="sites-navigation-link">Build It (FIGnition 2011)</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/build-it-rev-d/build-it-2" jotId="wuid:gx:14c3a9f7c30cd42" class="sites-navigation-link">Build It(2)</a></div></li></ul></li><li class="parent closed " wuid="gx:4cc9ff0aae40ae78"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/build-it" jotId="wuid:gx:4cc9ff0aae40ae78" class="sites-navigation-link">Build It (RevE)</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/build-it/test-it" jotId="wuid:gx:1168002fe978c699" class="sites-navigation-link">Testing The RevE Board</a></div></li></ul></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="/site/libby8dev/fignition/documentation/build-it-rev-d/fignition-flint" jotId="wuid:gx:2ad496bc723328a6" class="sites-navigation-link">FIGnition FLINT</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="/site/libby8dev/fignition/documentation/use-it" jotId="wuid:gx:657697090bb7afcd" class="sites-navigation-link">Use It</a></div></li><li class="parent closed " wuid="gx:36d54917546b9d31"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/code-it" jotId="wuid:gx:36d54917546b9d31" class="sites-navigation-link">Code It</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/built-in-definitions" jotId="wuid:gx:2cef875a512ee454" class="sites-navigation-link">Built-In Definitions</a></div></li><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/code-it/extra-definitions" jotId="wuid:gx:63fd970bbc0698d5" class="sites-navigation-link">Extra Definitions</a></div></li></ul></li><li class="parent " wuid="gx:7d5cfdd7f93f09f8"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/understand-it" jotId="wuid:gx:7d5cfdd7f93f09f8" class="sites-navigation-link">Understand It</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/understand-it/video-modes" jotId="wuid:gx:57959a09321997e9" class="sites-navigation-link">Video Modes</a></div></li><li class=""><div class="current-bg" jotId="wuid:gx:74246869e26d7e79" dir="ltr" style="padding-left: 76px;">Forth Execution (Advanced Topic)</div></li></ul></li></ul></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/buy-it" jotId="wuid:gx:15500dbce4aeec91" class="sites-navigation-link">Buy It</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/publicity" jotId="wuid:gx:19f455ebfff1520f" class="sites-navigation-link">Publicity</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/progress" jotId="wuid:gx:3c3ad127e44a57a8" class="sites-navigation-link">Progress</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/schedule" jotId="wuid:gx:4aea2f3c7bdfcdb1" class="sites-navigation-link">Schedule</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/examples" jotId="wuid:gx:16cee0cd923b908e" class="sites-navigation-link">Examples</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/performance" jotId="wuid:gx:7b3d01b91149b658" class="sites-navigation-link">Performance</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/links-and-forums" jotId="wuid:gx:43a0fc94ca5c6178" class="sites-navigation-link">Links And Forums</a></div></li></ul></li><li class="topLevel parent " wuid="gx:402b72d856741da1"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/figkeys" jotId="wuid:gx:402b72d856741da1" class="sites-navigation-link topLevel">FIGKeys</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/build-it" jotId="wuid:gx:7dae51d88a06acae" class="sites-navigation-link">Build it</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/test-it" jotId="wuid:gx:1fd9820c1b81e8c4" class="sites-navigation-link">Test it</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/use-it" jotId="wuid:gx:5dcea6ac35829615" class="sites-navigation-link">Use It</a></div></li></ul></li><li class="topLevel parent " wuid="gx:182a07b96c6e5fe9"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/libby8" jotId="wuid:gx:182a07b96c6e5fe9" class="sites-navigation-link topLevel">Libby8</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/concept" jotId="wuid:gx:2dbaf621339fd6b7" class="sites-navigation-link">Concept</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/circuit" jotId="wuid:gx:20b1edd6f9d5d20c" class="sites-navigation-link">Circuit</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/avr-firmware" jotId="wuid:gx:12fae2270b17f683" class="sites-navigation-link">Avr Firmware</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/emulator" jotId="wuid:gx:34df9cad3b1a3f87" class="sites-navigation-link">Emulator</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/faq" jotId="wuid:gx:6fff2256528722b9" class="sites-navigation-link">FAQ</a></div></li></ul></li><li class="topLevel parent " wuid="gx:55807cf0ff87fc50"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/stripes" jotId="wuid:gx:55807cf0ff87fc50" class="sites-navigation-link topLevel">Stripes</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/stripes/examples" jotId="wuid:gx:1cbaaee17ab677d4" class="sites-navigation-link">Examples</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="/site/libby8dev/ga" jotId="wuid:gx:7f040827d2115e7" class="sites-navigation-link topLevel">GALU - A Gate Array Logic based ALU IC.</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="/site/libby8dev/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:50236f90e14b6ee4" class="sites-navigation-link topLevel">Sitemap</a></div></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/site/libby8dev/fignition" dir="ltr">fignition</A>‎ &gt; ‎<A href="/site/libby8dev/fignition/documentation" dir="ltr">Documentation</A>‎ &gt; ‎<A href="/site/libby8dev/fignition/documentation/understand-it" dir="ltr">Understand It</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Forth Execution (Advanced Topic)</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><h3><a name="TOC-Introduction"></a>Introduction</h3><br />This section describes how FIGnition Executes Forth.<br /><h3><a name="TOC-Byte-Codes"></a>Byte Codes<br /></h3><br />FIGnition's Forth programs consist of both 8-bit Byte Codes and 16-bit 
Direct Threaded Addresses. In FIGnition Forth all instructions are of one of three basic forms:<br /><br /><div style="display:block;text-align:left"></div><div style="display:block;text-align:left"></div><div style="display:block;text-align:left"><a href="https://sites.google.com/site/libby8dev/fignition/documentation/understand-it/bytecodes/ByteCodes.png?attredirects=0" imageanchor="1"><img border="0" src="https://sites.google.com/site/libby8dev/_/rsrc/1388837284534/fignition/documentation/understand-it/bytecodes/ByteCodes.png" /></a></div><br />
<div style="display:block;text-align:left"></div><br />This allows FIGnition Forth to be more compact than typical Forths and because the Serial RAM is relatively slow, actually increases the performance, because full addresses don't have to be fetched for the most common operations. This execution model simplifies instruction execution, because threaded code is implied: the Code Field Address of a Colon Definition simply points to the code to be executed and neither an indirect JSR to push IP nor an indirect execution address are needed.<br /><br />The disadvantage is that only 40Kb can be used for code, the bottom 20Kb can only be used for data.<br /><h3><a name="TOC-Registery"></a>Registery<br /></h3>The Forth model uses a number of internal registers which are mapped to AVR registers.<br /><br /><br /><table border="1" bordercolor="#888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px"><tbody><tr><td style="background-color:rgb(204,204,204);width:60px;height:16px"><b> Name</b></td><td style="background-color:rgb(204,204,204);width:60px;height:16px"><b> Register</b></td><td style="background-color:rgb(204,204,204);width:512px;height:16px"><b> Purpose</b></td></tr><tr><td style="width:60px;height:16px"> gIP</td><td style="width:60px;height:16px"> 28</td><td style="width:512px;height:16px"> The Instruction Pointer - contains the address of the next instruction to be executed.</td></tr><tr><td style="width:60px;height:16px"> gTos</td><td style="width:60px;height:16px"> 16</td><td style="width:512px;height:16px"> The value on the top of the stack, in a register for performance reasons.<br /></td></tr><tr><td style="width:60px;height:16px"> gDP</td><td style="width:60px;height:16px"> 26</td><td style="width:512px;height:16px"> The Data Pointer - contains the address of the top of the data stack. It pushes up.<br /></td></tr><tr><td style="width:60px;height:16px"> gILoop</td><td style="width:60px;height:16px"> 12</td><td style="width:512px;height:16px"> The Loop Counter - contains the value of the current <b>do</b> ... <b>loop</b> counter, the value returned by i.<br /></td></tr><tr><td> gLoopLim</td><td> 10</td><td> The Loop Limit - the first number supplied to a <b>do</b> ... <b>loop</b>; the value returned by i'<br /></td></tr><tr><td> tmp0..3</td><td> 18 .. 24<br /></td><td> Temporary Registers used to supply parameters to routines written using the gcc libc convention.<br /></td></tr><tr><td> RP</td><td> 0x3d</td><td> The Return stack pointer, equivalent to the AVR's SP stack pointer.<br /></td></tr></tbody></table><br /><h3><a name="TOC-Byte-Code-List"></a>Byte Code List</h3>The byte code list corresponds to the primary built-in definitions.<br /><br /><table border="1" bordercolor="#888" cellspacing="0" style="border-collapse:collapse;border-color:rgb(136,136,136);border-width:1px"><tbody><tr><td style="width:60px;height:16px;background-color:rgb(204,204,204)"><b> Code</b></td><td style="width:95px;height:16px;background-color:rgb(204,204,204)"><b> Name</b></td><td style="width:482px;height:16px;background-color:rgb(204,204,204)"><b> Action</b></td></tr><tr><td style="width:60px;height:16px"> 0</td><td style="width:95px;height:16px"> kFigNext</td><td style="width:482px;height:16px"> A No-operation<br /></td></tr><tr><td style="width:60px;height:16px"> 1</td><td style="width:95px;height:16px"> kFigLit</td><td style="width:482px;height:16px"> Pushes a (big-endian) 16-bit Literal, which follows kFigLit, onto the stack.<br /></td></tr><tr><td style="width:60px;height:16px"> 2</td><td style="width:95px;height:16px"> kFigExecute</td><td style="width:482px;height:16px"> Executes the Forth definition at gTos; if gTos&lt;256, executes the corresponding byte code instead.<br /></td></tr><tr><td style="width:60px;height:16px"> 3</td><td style="width:95px;height:16px"> kFigDrop</td><td style="width:482px;height:16px"> Pops the top item from the data stack.<br /></td></tr><tr><td style="width:60px;height:16px"> 4</td><td style="width:95px;height:16px"> kFigOBranch</td><td style="width:482px;height:16px"> If gTos==0, then performs a branch specified by the (big-endian) 16-bit address that follows. Pops gTos.<br /></td></tr><tr><td style="width:60px;height:16px"> 5</td><td style="width:95px;height:16px"> kFigBranch</td><td style="width:482px;height:16px"> Performs a branch specified by the 16-bit address that follows.</td></tr><tr><td style="width:60px;height:16px"> 6</td><td style="width:95px;height:16px"> kFigLoop</td><td style="width:482px;height:16px"> Performs <b>loop</b>. It increments gILoop and if it's &lt; gLoopLim, branches to the 16-bit address that follows.<br /></td></tr><tr><td style="width:60px;height:16px"> 7</td><td style="width:95px;height:16px"> kFigPlusLoop</td><td style="width:482px;height:16px"> Performs <b>+loop</b>. It adds gTos to gILoop; pops gTos and if gILoop didn't cross the boundary given by gLoopLim, branches to the 16-bit address that follows.</td></tr><tr><td style="width:60px;height:16px"> 8</td><td style="width:95px;height:16px"> kFigDo</td><td style="width:482px;height:16px"> Performs the <b>do</b> part of a <b>do</b> .. <b>loop</b>. Pushes the old gLoopLim, then gILoop on the return stack; pops gTos into gILoop and the next on the stack to gLoopLim.<br /></td></tr><tr><td style="width:60px;height:16px"> 9</td><td style="width:95px;height:16px"> kFigUMult</td><td style="width:482px;height:16px"> Performs <b>u*</b>, multiplying gTos and the next item on the stack to give an unsigned 32-bit result; storing the high 16-bits in the next item on the stack and the low 16-bits in gTos.<br /></td></tr><tr><td style="width:60px;height:16px"> 10</td><td style="width:95px;height:16px"> kFigPortMod</td><td style="width:482px;height:16px"> Performs an atomic port modification returning the value of the port before the modification: <i>andMask orMask Address</i> <b>&gt;port&gt;</b> <i>oldValue</i>. The new value stored is: (Mem[Address]&amp;andMask) | orMask.<br /></td></tr><tr><td style="width:60px;height:16px"> 11</td><td style="width:95px;height:16px"> kFigUDivMod</td><td style="width:482px;height:16px"> Performs an unsigned 32-bit / 16-bit division and modulus operation returning the result in gTos and the modulus in the next item on the stack. <br /></td></tr><tr><td style="width:60px;height:16px"> 12</td><td style="width:95px;height:16px"> kFigOpAnd</td><td style="width:482px;height:16px"> Performs: gTos &amp;= nos; popping nos.<br /></td></tr><tr><td style="width:60px;height:16px"> 13</td><td style="width:95px;height:16px"> kFigOpOr</td><td style="width:482px;height:16px"> Performs: gTos |= nos; popping nos.</td></tr><tr><td style="width:60px;height:16px"> 14</td><td style="width:95px;height:16px"> kFigOpXor</td><td style="width:482px;height:16px"> Performs: gTos ^= nos; popping nos.</td></tr><tr><td style="width:60px;height:16px"> 15</td><td style="width:95px;height:16px"> kFigLeave</td><td style="width:482px;height:16px"> Sets gILoop=gLoopLim so that the next <b>loop</b> will terminate.<br /></td></tr><tr><td style="width:60px;height:16px"> 16</td><td style="width:95px;height:16px"> kFigDoes</td><td style="width:482px;height:16px"> Performs <b>(does)</b> , the action part of a Definer definition. kFigDoes is equivalent to <b>r&gt;</b> since a definer definition merely consists of a pointer to the <b>does&gt;</b> part of a definer; which when executed will contain the Parameter Field Address on the top of the return stack.<br /></td></tr><tr><td style="width:60px;height:16px"> 17</td><td style="width:95px;height:16px"> kFigRFrom</td><td style="width:482px;height:16px"> Performs <b>r&gt;</b> . Pops the top item from the return stack, pushing onto the data stack.<br /></td></tr><tr><td style="width:60px;height:16px"> 18</td><td style="width:95px;height:16px"> kFigRFetch</td><td style="width:482px;height:16px"> Copies the top item from the return stack, pushing onto the data stack.</td></tr><tr><td> 19</td><td> kFigToR</td><td> Pops the top item from the data stack onto the return stack.<br /></td></tr><tr><td> 20</td><td> kFigZeroEq</td><td>If gTos==0 then sets gTos to -1 otherwise, it sets it to 0.<br /></td></tr><tr><td> 21</td><td> kFigZeroLt</td><td> If gTos&lt;0 then sets gTos to -1 otherwise, it sets it to 0.</td></tr><tr><td> 22</td><td> kFigPlus</td><td> Adds nos to gTos storing the result in gTos; pops nos.<br /></td></tr><tr><td> 23</td><td> kFigDPlus</td><td> Double Plus. Builds a 32-bit number from second and third items on the stack and adds it to the 32-bit number formed from the first item on the stack and gTos; storing the result in gTos:nos. The second and third items on the stack are popped.<br /></td></tr><tr><td> 24</td><td> kFigMinus</td><td> Negates gTos, storing the result in gTos.<br /></td></tr><tr><td> 25</td><td> kFigDMinus</td><td> Double Negate. Builds a 32-bit number from nos and gTos; negates it and stores the result in gTos:nos.<br /></td></tr><tr><td> 26</td><td> kFigOver</td><td> Copies nos; pushes gTos onto the stack and stores the copied nos into gTos.<br /></td></tr><tr><td> 27</td><td> kFigSwap</td><td> Swaps nos and gTos<br /></td></tr><tr><td> 28</td><td> kFigDup</td><td> Pushes gTos onto the stack, but doesn't change.<br /></td></tr><tr><td> 29</td><td> kFigFetch</td><td> Fetches the 16-bit value at memory location gTos and stores it in gTos. (Fetch only reads from SRAM or Firmware).<br /></td></tr><tr><td> 30</td><td> kFigCFetch</td><td> Fetches the 8-bit value at memory location gTos and stores it in gTos. (CFetch only reads from SRAM or Firmware).</td></tr><tr><td> 31</td><td> kFigCPling</td><td> Stores the 8-bit value in nos at memory location gTos. (Pling only writes to SRAM).<br /></td></tr><tr><td> 32</td><td> kFigPling</td><td> Stores the 16-bit value in nos at memory location gTos. (Pling only writes to SRAM).</td></tr><tr><td> 33</td><td> kFigGetI</td><td> Pushes gTos and sets gTos to the value of gILoop.<br /></td></tr><tr><td> 34</td><td> kFigInc</td><td> Adds 1 to gTos.<br /></td></tr><tr><td> 35</td><td> kFigNative</td><td> Jumps to native AVR code at (IP+2)&amp;0xfffe (that is, the following instruction, word aligned).<br /></td></tr><tr><td> 36</td><td> kFigIntCFetch</td><td> Fetches the 8-bit value at internal memory location gTos and stores it in gTos. (CFetch only reads from internal RAM).</td></tr><tr><td> 37</td><td> kFigIntCStore</td><td> Stores the 8-bit value in nos at internal memory location gTos. (Pling only writes to internal RAM).</td></tr><tr><td> 38</td><td> kFigIntFetch</td><td> Fetches the 16-bit value at internal memory location gTos and stores it in gTos. (CFetch only reads from internal RAM).</td></tr><tr><td> 39</td><td> kFigIntStore</td><td> Stores the 16-bit value in nos at internal memory location gTos. (Pling only writes to internal RAM).</td></tr><tr><td> 40</td><td> kFigEmit</td><td> Displays the current character in gTos on the screen; pops gTos.<br /></td></tr><tr><td> 41</td><td> kFigSFGet</td><td> Returns the value of IntMem[sf+postByte]<br /></td></tr><tr><td> 42</td><td> kFigDotHex</td><td> Displays the value of gTos as a hexadecimal number.<i> Note: Low-level debugging tool; likely to be deprecated.</i></td></tr><tr><td> 43</td><td> kFigZero</td><td> Pushes value 0 onto the stack.<br /></td></tr><tr><td> 44</td><td> kFigLitC</td><td> Followed by a byte value in the range 0 to 255. Pushes the byte value to the data stack.<br /></td></tr><tr><td> 45</td><td> kFigAt</td><td> Places the cursor at nos, gTos on the screen.<br /></td></tr><tr><td> 46</td><td> kFigExit</td><td> Returns from a definition.<br /></td></tr><tr><td> 47</td><td> kFigDec</td><td> Subtracts 1 from gTos.<br /></td></tr><tr><td> 48</td><td> kFigFill</td><td><i> </i>Used as in<i>: addr len value</i><b> fill</b>. Fills an area of SRAM or internal RAM with a particular value. The second item on the stack is the address; the first item is the number of bytes and gTos is the fill value.<br /></td></tr><tr><td> 49</td><td> kFigSfPut</td><td> Stores gTos in IntMem[gSf+postByte]<br /></td></tr><tr><td> 50</td><td> kFigLsr</td><td> Calculates gTos = (unsigned) nos shifted right by gTos bits.<br /></td></tr><tr><td> 51</td><td> kFigLsl</td><td> Calculates gTos = (unsigned) nos shifted left by gTos bits.<br /></td></tr><tr><td> 52</td><td> kFigDskRd</td><td> Given a virtual block number in gTos reads the corresponding virtual block and returns its physical block number.<br /></td></tr><tr><td> 53</td><td> kFigDskWr</td><td> Given a virtual block number in the second item on the stack; the physical block number in the first item on the stack and an address in gTos; writes the block at the address to the physical block number; mapping it to the given virtual block number. <i>Note: kFigDskWr can cause a Flash disk purge if no more physical</i><i> blocks are available.</i><br /></td></tr><tr><td> 54</td><td> kFigCMove</td><td> Given a source address in the second item on the stack; the destination address in the first item and the length in gTos; cmove moves length number of bytes from the source memory location to the destination. The source location can be in internal Ram, ROM or SRAM and the destination location must be in either RAM or SRAM. All three parameters are popped from the stack.<br /></td></tr><tr><td> 55</td><td> kFigPlot</td><td> Given an x coordinate in nos and a y coordinate in gTos; plots the pixel(x,y) in the current pen mode.<br /></td></tr><tr><td> 56</td><td> kFigSpi</td><td> A basic SPI driver.<br /></td></tr><tr><td> 57</td><td> kFigTrace</td><td> <i>Takes FIGnition into Trace mode, Deprecated</i>. You can test it though, by creating a word: : tTrace [ 58 c, ] ; .<br /></td></tr><tr><td> 58</td><td> kFigDumpDict</td><td> <i>Dumps the current Dictionary, Deprecated.</i> <br /></td></tr><tr><td> 59</td><td> kFigVarDoes</td><td> Optimises fetching normal <b>var</b> variables. Pushes gTos; pops the top item from the return stack and stores it in gTos.<br /></td></tr><tr><td> 60</td><td> kFigConstDoes</td><td> Optimises fetching normal <b>const</b> variables. Pushes gTos; pops the top item from the return stack; fetches the 16-bit value at that location and stores the result in gTos.<span> </span><br /></td></tr><tr><td> 61</td><td> kFigTile</td><td> Copies a bitmap in SRAM to tile space in internal RAM.<br /></td></tr><tr><td> 62</td><td> kFigBlt</td><td> Xor Blits a bitmap in tile space to the frame buffer.<br /></td></tr><tr><td> 63</td><td> kFig2Blt</td><td> Xor Blits two bitmaps in tile space to the frame buffer in succession.<br /></td></tr><tr><td> 64</td><td> kFigBlts</td><td> Copy Blits a bitmap in tile space repeatedly over a region on the Frame buffer.<br /></td></tr><tr><td> 65</td><td> kFigClip</td><td> Defines the clipping area for the frame buffer.<br /></td></tr><tr><td> 66</td><td> kFigOpSub</td><td> Performs: gTos = nos-gTos; popping nos.</td></tr></tbody></table><br /><i>Note: @TODO Check the parameters for double-number operations.<br /><br /></i><h3><a name="TOC-Inner-Interpreter"></a>Inner Interpreter</h3><p>In FIGnition, Forth programs consist of byte codes and execution addresses and these are all executed using an inner interpreter. In principle the interpreter is very simple and is equivalent to the following 'C' code, but in AVR assembler:</p><div class="sites-codeblock sites-codesnippet-block"><p><font size="2"><code>tmp=GetByte(gIP++);</code></font></p><p><font size="2"><code>if(tmp&lt;64) { // It's a normal byte token.<br /></code></font></p><p><font size="2"><code>  switch(tmp) {</code></font></p><p><font size="2"><code>  case kFigNext: // Nop does nothing.</code><br /></font></p><p><font size="2"><code>    break;</code></font></p><p><font size="2"><code>  case kFigLit: // A 16-bit big-endian literal follows.<br /></code></font></p><p><font size="2"><code>    Push(gTos); // save the old top of stack value.</code><br /></font></p><p><font size="2"><code>    tmp=GetByte(gIP++)&lt;&lt;8; // read the upper byte<br /></code></font></p><p><font size="2"><code>    </code><code>gTos=tmp+GetByte(gIP); // combine with LSB.</code><br /></font></p><p><font size="2"><code>    break;</code></font></p><p><font size="2"><code>  case kFigExecute:</code></font></p><p><font size="2"><code>    ... etc.<br /></code></font></p><p><font size="2"><code>  }</code><br /></font></p><p><font size="2"><code>}</code></font></p><p><font size="2"><code>else { // It's an executable address.</code></font></p><p><font size="2"><code>  Push(gIP); // save the return address.<br /></code></font></p><p><font size="2"><code>  gIP=(tmp&lt;&lt;8)+GetByte(gIP); // jump to the next instruction.<br /></code></font></p><p><font size="2"><code>}</code></font></p></div><br /><p>However, all of this is complicated by the way FIGnition accesses memory and the need for performance enhancements. The first issue is that RAM execution requires the use of the built-in SPI peripheral on the AVR, but ROM execution is taken directly from the AVR's Flash memory. So GetByte is therefore:</p><div class="sites-codeblock sites-codesnippet-block"><p><font size="2"><code>byte GetByte(ushort addr)</code></font></p><p><font size="2"><code>{</code></font></p><p><font size="2"><code>  if((short)addr&lt;0) { // it's in SRAM.</code></font></p><p><font size="2"><code>    return MicrochipSramRead(addr&amp;0x7fff);</code><br /></font></p><p><font size="2"><code>  }</code></font></p><p><font size="2"><code>  else { // it's in Flash.</code></font></p><p><font size="2"><code>    return pgm_read_byte((byte*)addr);</code><br /></font></p><p><font size="2"><code>  }</code><br /></font></p><p><font size="2"><code>}</code></font></p></div><p>However, all this is very inefficient since it effectively takes 2µs to read a sequential byte, though the SRAM chip could be set to start reading the next byte before it's needed so that it will be ready for when the next instruction is executed (which is the common case). In fact the inner interpreter makes a number of optimizations in order to improve program execution; as well as inlining the whole of GetByte and SRAM reads in most cases to reduce the call / return overhead.</p><div style="display:block;text-align:center;margin-right:auto;margin-left:auto"><a href="https://sites.google.com/site/libby8dev/fignition/documentation/understand-it/bytecodes/FIGnitionInnerInterpreter.png?attredirects=0" imageanchor="1"><img border="0" height="347" src="https://sites.google.com/site/libby8dev/_/rsrc/1331040598734/fignition/documentation/understand-it/bytecodes/FIGnitionInnerInterpreter.png?height=347&amp;width=400" width="400" /></a></div><br /><p>As you look into this you'll realize there's no way for Forth execution to start executing from RAM, since execution starts in ROM and there's no route from there into executing RAM code. In reality, the Forth ROM executes user code (in SRAM) by pushing its address on the data stack and then executing kFigExec; for example as a result of executing a command line.<br /></p><p>The Forth ROM is written almost entirely in Forth itself. As stated before, FIGnition Forth was originally based on Andrew Holme's <a href="http://www.aholme.co.uk/Mk1/Architecture.htm" rel="nofollow">Mark 1 Forth Computer</a>'s ROM, which was written entirely in Forth. However, since then there have been a number of changes, including 32 additional byte codes for things like access to the AVR's internal memory; built-in byte codes for cmove and fill; optimizations or variable and constant fetching and also the ability to execute AVR assembler from the Forth ROM using kFigNative.</p><p>The Forth ROM is currently encoded as word and byte definitions using the AVR assembler. For example: cr is:</p><div class="sites-codeblock sites-codesnippet-block"><p><font size="2"><code>_Colon FigCr, "cr", 2</code><br /></font></p><p><font size="2"><code>    .byte kFigLit</code></font></p><p><font size="2"><code>    .word 13</code></font></p><p><font size="2"><code>    .byte kFigEmit,kFigExit</code></font></p></div><p>( _Colon is an assembler macro which manually builds Forth colon definition headers).<br /></p><p>The ROM is currently being rewritten directly in Forth along with a translator to convert it to the original word and byte definitions. This will make it much easier to modify the ROM for future firmware updates.<br /></p></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/AddSession?continue=https://sites.google.com/site/libby8dev/fignition/documentation/understand-it/bytecodes&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/site/libby8dev/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="https://sites.google.com/site/libby8dev/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/4edc19/system/js/jot_min_view__en_gb.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/site/libby8dev/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/u/0/d/AAHRpnXsPxZjbAZh3TEOF-thhM7zMcxeaMaSk6GP8gH-DLFn73EXiE5X39JHOLS3rDLVx5hGeK9pdJcTrGd30cBUSEJOQhU3UqjIDSkrNEEkv6tvBmyiYonVvqv2pL86WCAnd5-dPd0v-/api/js?token=AGNctVZSrL5xvcfymheW3o6uS0kCVbzDdw:1562360830368',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en_GB");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
