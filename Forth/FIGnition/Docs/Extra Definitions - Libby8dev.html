<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { (function(){function e(g){this.t={};this.tick=function(h,k,f){this.t[h]=[void 0!=f?f:(new Date).getTime(),k];if(void 0==f)try{window.console.timeStamp("CSI/"+h)}catch(m){}};this.tick("start",null,g)}var a;if(window.performance)var d=(a=window.performance.timing)&&a.responseStart;var l=0<d?new e(d):new e;window.jstiming={Timer:e,load:l};if(a){var b=a.navigationStart;0<b&&d>=b&&(window.jstiming.srt=d-b)}if(a){var c=window.jstiming.load;0<b&&d>=b&&(c.tick("_wtsrt",void 0,b),c.tick("wtsrt_","_wtsrt",
d),c.tick("tbsd_","wtsrt_"))}try{a=null,window.chrome&&window.chrome.csi&&(a=Math.floor(window.chrome.csi().pageT),c&&0<b&&(c.tick("_tbnd",void 0,window.chrome.csi().startE),c.tick("tbnd_","_tbnd",b))),null==a&&window.gtbExternal&&(a=window.gtbExternal.pageT()),null==a&&window.external&&(a=window.external.pageT,c&&0<b&&(c.tick("_tbnd",void 0,window.external.startE),c.tick("tbnd_","_tbnd",b))),a&&(window.jstiming.pt=a)}catch(g){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="//www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="https://ssl.gstatic.com/sites/p/4edc19/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { function d(a){return document.getElementById(a)}window.byId=d;function g(a){return a.replace(/^\s+|\s+$/g,"")}window.trim=g;var h=[],k=0;window.JOT_addListener=function(a,b,c){var f=new String(k++);a={eventName:a,handler:b,compId:c,key:f};h.push(a);return f};window.JOT_removeListenerByKey=function(a){for(var b=0;b<h.length;b++)if(h[b].key==a){h.splice(b,1);break}};window.JOT_removeAllListenersForName=function(a){for(var b=0;b<h.length;b++)h[b].eventName==a&&h.splice(b,1)};
window.JOT_postEvent=function(a,b,c){var f={eventName:a,eventSrc:b||{},payload:c||{}};if(window.JOT_fullyLoaded)for(b=h.length,c=0;c<b&&c<h.length;c++){var e=h[c];e&&e.eventName==a&&(f.listenerCompId=e.compId||"",(e="function"==typeof e.handler?e.handler:window[e.handler])&&e(f))}else window.JOT_delayedEvents.push({eventName:a,eventSrc:b,payload:c})};window.JOT_delayedEvents=[];window.JOT_fullyLoaded=!1;
window.JOT_formatRelativeToNow=function(a,b){a=((new Date).getTime()-a)/6E4;if(1440<=a||0>a)return null;var c=0;60<=a&&(a/=60,c=2);2<=a&&c++;return b?window.JOT_siteRelTimeStrs[c].replace("__duration__",Math.floor(a)):window.JOT_userRelTimeStrs[c].replace("__duration__",Math.floor(a))}; })()
</script>
<script>

  

  var breadcrumbs = [{"path":"/site/libby8dev/fignition","deleted":false,"title":"fignition","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation","deleted":false,"title":"Documentation","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation/code-it","deleted":false,"title":"Code It","dir":"ltr"},{"path":"/site/libby8dev/fignition/documentation/code-it/extra-definitions","deleted":false,"title":"Extra Definitions","dir":"ltr"}];
  var JOT_clearDotPath = 'https://ssl.gstatic.com/sites/p/4edc19/system/app/images/cleardot.gif';

  
  var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

  
  

  

  var webspace = {"gvizGstaticVersion":"current","enableAnalytics":true,"pageSharingId":"jotspot_page","codeembeds":{"outerIframeSrc":"https://www.gstatic.com/jotspot/embeds/code/0f08d42392f2000e7e3f3daf5b427a43/outer_iframe.html","innerIframeSrc":"https://1221271938-jotspot-embeds.googleusercontent.com/code/8d87fa64604b2a11fae2ed06104c58d3/inner_iframe.html"},"enableUniversalAnalytics":false,"sharingPolicy":"OPENED","siteTitle":"Libby8dev","jot2atari":{"eligibility":"ineligible"},"onepickUrl":"https://docs.google.com/picker","adsensePublisherId":null,"features":{"oAuthForChartsApi":true,"moreMobileStyleImprovements":null,"googleChartsOverGstatic":false,"picasaAlbumInsert":false,"subscriptionDataMigrationInProgress":false,"enableJot2Atari":true,"plusBadge":false},"isPublic":true,"newSitesBaseUrl":"https://sites.google.com","isConsumer":true,"serverFlags":{"jot2AtariLearnMoreUrl":"https://support.google.com/sites/answer/7035197"},"domainAnalyticsAccountId":"","plusPageId":"","signInUrl":"https://accounts.google.com/AccountChooser?continue\u003dhttps://sites.google.com/site/libby8dev/fignition/documentation/code-it/extra-definitions\u0026service\u003djotspot","analyticsAccountId":"UA-10916122-1","scottyUrl":"/_/upload","homePath":"/","siteNoticeUrlEnabled":null,"plusPageUrl":"","adsensePromoClickedOrSiteIneligible":true,"csiReportUri":"https://gg.google.com/csi","sharingId":"jotspot","termsUrl":"//www.google.com/intl/en/policies/terms/","gvizVersion":1,"editorResources":{"sitelayout":["https://ssl.gstatic.com/sites/p/4edc19/system/app/css/sitelayouteditor.css"],"text":["https://ssl.gstatic.com/sites/p/4edc19/system/js/codemirror.js","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/codemirror_css.css","https://ssl.gstatic.com/sites/p/4edc19/system/js/trog_edit__en.js","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/trogedit.css","/site/libby8dev/_/rsrc/1560928646000/system/app/css/editor.css","https://ssl.gstatic.com/sites/p/4edc19/system/app/css/codeeditor.css","/site/libby8dev/_/rsrc/1560928646000/system/app/css/camelot/editor-jfk.css"]},"sharingUrlPrefix":"/_/sharing","isAdsenseEnabled":true,"domain":"defaultdomain","baseUri":"/site/libby8dev","name":"libby8dev","siteTemplateId":false,"siteNoticeRevision":null,"siteNoticeUrlAddress":null,"siteNoticeMessage":null,"page":{"isRtlLocale":false,"canDeleteWebspace":false,"isPageDraft":null,"parentPath":"/fignition/documentation/code-it","parentWuid":"wuid:gx:36d54917546b9d31","siteLocale":"en_GB","timeZone":"Australia/Sydney","type":"text","title":"Extra Definitions","locale":"en","wuid":"wuid:gx:63fd970bbc0698d5","revision":11,"path":"/fignition/documentation/code-it/extra-definitions","isSiteRtlLocale":false,"pageInheritsPermissions":null,"name":"extra-definitions","canChangePath":true,"state":"","properties":{},"bidiEnabled":false,"currentTemplate":{"path":"/system/app/pagetemplates/text","title":"Web Page"}},"canPublishScriptToAnyone":true,"user":{"keyboardShortcuts":true,"sessionIndex":0,"onePickToken":"000770F203B91ADD4D1AB3B157463197D5A7B0D7AB299DAD03::1562360681197","guest_":false,"displayNameOrEmail":"Steve Justin","userName":"stevejustin1963","uid":"12267405931756516888","domainUser":false,"renderMobile":false,"domain":null,"namespace":"","hasWriteAccess":false,"namespaceUser":false,"primaryEmail":"stevejustin1963@gmail.com","hasAdminAccess":false},"gadgets":{"baseUri":"/site/libby8dev/system/app/pages/gadgets"}};
  webspace.page.breadcrumbs = breadcrumbs;

  
  var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="Extra Definitions - Libby8dev" />
<meta itemprop="name" content="Extra Definitions - Libby8dev" />
<meta property="og:title" content="Extra Definitions - Libby8dev" />
<meta name="description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<meta itemprop="description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<meta id="meta-tag-description" property="og:description" content="Open Development Site for A minimal Z80/Avr Single Board Computer" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="https://ssl.gstatic.com/sites/p/4edc19/system/app/themes/tron/standard-css-tron-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/site/libby8dev/_/rsrc/1560928646000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/site/libby8dev/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>Extra Definitions - Libby8dev</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en_GB            ">
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything" class="">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class="" role="banner"><div class="sites-header-cell-buffer-wrapper"><h2><a href="https://sites.google.com/site/libby8dev/" dir="ltr" id="sites-chrome-userheader-title">Libby8dev</a></h2></div></td><td class="sites-layout-searchbox  "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/site/libby8dev/system/app/pages/search" role="search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container" role="navigation">
</td>
</tr>
</table>
</div>
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left initial" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_2bd" class="sites-embed" role="navigation"><div class="sites-embed-content sites-sidebar-nav"><ul role="navigation" jotId="navList" class="has-expander"><li class="topLevel nav-first parent " wuid="gx:5e6ced805bd72d67"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/home" jotId="wuid:gx:5e6ced805bd72d67" class="sites-navigation-link topLevel">Home</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/intro" jotId="wuid:gx:3c9f58ed9b65663" class="sites-navigation-link">Intro</a></div></li></ul></li><li class="topLevel parent " wuid="gx:73afab7deeb502b4"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/fignition" jotId="wuid:gx:73afab7deeb502b4" class="sites-navigation-link topLevel">fignition</a></div><ul role="navigation" class="has-expander"><li class="parent " wuid="gx:7c694f1034e72915"><div dir="ltr" style="padding-left: 19px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation" jotId="wuid:gx:7c694f1034e72915" class="sites-navigation-link">Documentation</a></div><ul role="navigation" class="has-expander"><li class="parent closed " wuid="gx:1f47cdb1dd9bbec2"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/build-it-rev-d" jotId="wuid:gx:1f47cdb1dd9bbec2" class="sites-navigation-link">Build It (FIGnition 2011)</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/build-it-rev-d/build-it-2" jotId="wuid:gx:14c3a9f7c30cd42" class="sites-navigation-link">Build It(2)</a></div></li></ul></li><li class="parent closed " wuid="gx:4cc9ff0aae40ae78"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/build-it" jotId="wuid:gx:4cc9ff0aae40ae78" class="sites-navigation-link">Build It (RevE)</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/build-it/test-it" jotId="wuid:gx:1168002fe978c699" class="sites-navigation-link">Testing The RevE Board</a></div></li></ul></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="/site/libby8dev/fignition/documentation/build-it-rev-d/fignition-flint" jotId="wuid:gx:2ad496bc723328a6" class="sites-navigation-link">FIGnition FLINT</a></div></li><li class=""><div dir="ltr" style="padding-left: 57px;"><a href="/site/libby8dev/fignition/documentation/use-it" jotId="wuid:gx:657697090bb7afcd" class="sites-navigation-link">Use It</a></div></li><li class="parent " wuid="gx:36d54917546b9d31"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/code-it" jotId="wuid:gx:36d54917546b9d31" class="sites-navigation-link">Code It</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/built-in-definitions" jotId="wuid:gx:2cef875a512ee454" class="sites-navigation-link">Built-In Definitions</a></div></li><li class=""><div class="current-bg" jotId="wuid:gx:63fd970bbc0698d5" dir="ltr" style="padding-left: 76px;">Extra Definitions</div></li></ul></li><li class="parent closed " wuid="gx:7d5cfdd7f93f09f8"><div dir="ltr" style="padding-left: 38px;"><div class="expander"></div><a href="/site/libby8dev/fignition/documentation/understand-it" jotId="wuid:gx:7d5cfdd7f93f09f8" class="sites-navigation-link">Understand It</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/understand-it/video-modes" jotId="wuid:gx:57959a09321997e9" class="sites-navigation-link">Video Modes</a></div></li><li class=""><div dir="ltr" style="padding-left: 76px;"><a href="/site/libby8dev/fignition/documentation/understand-it/bytecodes" jotId="wuid:gx:74246869e26d7e79" class="sites-navigation-link">Forth Execution (Advanced Topic)</a></div></li></ul></li></ul></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/buy-it" jotId="wuid:gx:15500dbce4aeec91" class="sites-navigation-link">Buy It</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/publicity" jotId="wuid:gx:19f455ebfff1520f" class="sites-navigation-link">Publicity</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/progress" jotId="wuid:gx:3c3ad127e44a57a8" class="sites-navigation-link">Progress</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/schedule" jotId="wuid:gx:4aea2f3c7bdfcdb1" class="sites-navigation-link">Schedule</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/examples" jotId="wuid:gx:16cee0cd923b908e" class="sites-navigation-link">Examples</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/fignition/performance" jotId="wuid:gx:7b3d01b91149b658" class="sites-navigation-link">Performance</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/links-and-forums" jotId="wuid:gx:43a0fc94ca5c6178" class="sites-navigation-link">Links And Forums</a></div></li></ul></li><li class="topLevel parent " wuid="gx:402b72d856741da1"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/figkeys" jotId="wuid:gx:402b72d856741da1" class="sites-navigation-link topLevel">FIGKeys</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/build-it" jotId="wuid:gx:7dae51d88a06acae" class="sites-navigation-link">Build it</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/test-it" jotId="wuid:gx:1fd9820c1b81e8c4" class="sites-navigation-link">Test it</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/figkeys/use-it" jotId="wuid:gx:5dcea6ac35829615" class="sites-navigation-link">Use It</a></div></li></ul></li><li class="topLevel parent " wuid="gx:182a07b96c6e5fe9"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/libby8" jotId="wuid:gx:182a07b96c6e5fe9" class="sites-navigation-link topLevel">Libby8</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/concept" jotId="wuid:gx:2dbaf621339fd6b7" class="sites-navigation-link">Concept</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/circuit" jotId="wuid:gx:20b1edd6f9d5d20c" class="sites-navigation-link">Circuit</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/avr-firmware" jotId="wuid:gx:12fae2270b17f683" class="sites-navigation-link">Avr Firmware</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/emulator" jotId="wuid:gx:34df9cad3b1a3f87" class="sites-navigation-link">Emulator</a></div></li><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/libby8/faq" jotId="wuid:gx:6fff2256528722b9" class="sites-navigation-link">FAQ</a></div></li></ul></li><li class="topLevel parent " wuid="gx:55807cf0ff87fc50"><div dir="ltr" style="padding-left: 0px;"><div class="expander"></div><a href="/site/libby8dev/stripes" jotId="wuid:gx:55807cf0ff87fc50" class="sites-navigation-link topLevel">Stripes</a></div><ul role="navigation" class="has-expander"><li class=""><div dir="ltr" style="padding-left: 38px;"><a href="/site/libby8dev/stripes/examples" jotId="wuid:gx:1cbaaee17ab677d4" class="sites-navigation-link">Examples</a></div></li></ul></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="/site/libby8dev/ga" jotId="wuid:gx:7f040827d2115e7" class="sites-navigation-link topLevel">GALU - A Gate Array Logic based ALU IC.</a></div></li><li class="topLevel "><div dir="ltr" style="padding-left: 19px;"><a href="/site/libby8dev/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:50236f90e14b6ee4" class="sites-navigation-link topLevel">Sitemap</a></div></li></ul></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas" role="main">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A href="/site/libby8dev/fignition" dir="ltr">fignition</A>‎ &gt; ‎<A href="/site/libby8dev/fignition/documentation" dir="ltr">Documentation</A>‎ &gt; ‎<A href="/site/libby8dev/fignition/documentation/code-it" dir="ltr">Code It</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr" tabindex="-1" style="outline: none">Extra Definitions</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr">It's easy to add new definitions to FIGnition's set of commands. Here's some common ones.<br />
<a name="rnd"><h4><a name="TOC-Pseudo-Random-Numbers"></a>Pseudo-Random Numbers</h4></a>
We can define a simple 16-bit pseudo-random number generator as follows:<br />
<br />
<font size="2"><code>5 var seed               </code><br />
<code>: rnd ( range -- random )</code><br />
<code>  seed @ 1+ 75 * dup seed                        </code><br />
<code>  ! u* swap drop         </code><br />
<code>; <br />
<br />
</code></font><code>n rnd</code> generates a number in the range 0 to n -1. For example, <code>: dice 10 0 do 6 rnd 1+ . loop ; </code>will throw a die 10 times.<br />
<br />
<a name="ConstantData"><h4><a name="TOC-Constant-Data"></a>Constant Data</h4></a>
You can enter constant data values by defining this command:<br />
<br />
<font size="2"><code>: cdata &lt;builds does&gt; ;</code></font><br />
<br />
For example:<br />
<br />
<code>cdata days/months 31 c, 28 c, 31 c, 30 c, 31 c, 30 c, 31 c, 31 c, 30 c, 31 c, 30 c, 31 c,</code><br />
<br />
defines a list of days/month, so days/month 9 + c@ would give you the number of days in October ( 10-1) and days/month 1 + c@ would give you the number of days in February.<br />
<br />
Similarly:<br />
<br />
<code>: data &lt;builds does&gt; over + + ;</code><br />
<br />
Does the same for 16-bit values. E.g.<br />
<br />
<code>data pins 1234 , 9999 , 7777 , 2011 , 2010 , 2009 ,</code><br />
<br />
defines a list of the most ingenious pin numbers people have devised for cash machines to date.<br />
<a name="arrays"><h4><a name="TOC-Arrays"></a>Arrays</h4></a>
Arrays are a simple data structure, like a single column in a spreadsheet. We can define a simple array type with:<br />
<br />
<font size="2"><code>: var[] &lt;builds dup +</code><br />
<code>  allot does&gt; over + + ;</code></font><br />
<br />
Then use it to create arrays e.g.<br />
<br />
<code>54 var[] cards</code><br />
<br />
And access each row with e.g. <code>5 cards @ </code>to obtain the 6th row, <code>312 10 cards ! </code>to store 312 in the 11th row etc.<br />
<br />
Although simple, arrays are probably the most fundamental concept in data structures, because they allow you to access data based on a calculation rather than explicitly by name. For example, this bit of code:<br />
<br />
<div class="sites-codeblock sites-codesnippet-block"><br />
<code>: sortCards</code><br />
<code>  53 0 do</code><code><br />
    53 i - 0 do<br />
      i cards @ i 1+ cards @<br />
      2dup &lt; if swap then<br />
      i 1+ cards ! i cards !<br />
    loop<br />
</code><code>  loop</code><br />
<code>;</code></div>
<br />
Sorts the entire pack in about 1.5s.<br />
<br />
<a name="udgs"><h4><a name="TOC-Udgs"></a>Udgs</h4></a>
FIGnition provides some user-definable graphics, handy for some simple games. Here's a simple bit of code to access the bit patterns:<br />
<br />
<font size="2"><code>: udg</code><br />
<code>  8 * vram + 600 +</code><br />
<code>;</code></font><br />
<br />
For example, 0 udg returns the address of the first UDG and 15 udg the address of the last one. We can define udg patterns quite easily:<br />
<br />
<font size="2"><code>2 base !</code><br />
<code>cdata udgs</code><br />
<code>00101000 c,</code><br />
<code>01111110 c,</code><br />
<code>11011011 c,</code><br />
<code>11111111 c,</code><br />
<code>10011001 c,</code><br />
<code>10100101 c,</code><br />
<code>00000000 c,</code><br />
<code>00000000 c, ( invader)</code></font><br />
<br />
This takes us into binary mode and then it's quite easy to type out the bit patterns. At the end you'll need to type <code>decimal</code> to go back to normal numbers. If you're really clever you could pre-calculate them all and just enter the decimal values, e.g.<br />
<br />
<code>60 c, 126 c, 254 c,<br />248 c,</code><code> 248 c, 254 c,<br />126 c, 60 c,</code><br />
<br />
Which is a Pacman UDG. You can make it even more efficient by encoding the UDGs in hexadecimal. If you pair up the binary bit patterns and convert them to hex (by using .hex) the UDG is even more compact. We'd start by converting them:<br /><br /><code>00101000<span style="color:rgb(0,0,255)">01111110</span> .hex 0x287E OK</code><br /><br />And then repeat the process for rows 2..7 and finally define the UDG as:<br /><br /><code>hex 287E var udgs 0DBFF , </code><br /><code> 99A5 , 0 ,  decimal</code><br /><br />Would take only two lines - but it's not as easy to read that way!<br /><br />
<code>: initUdgs ( src dst num -- )</code><br />
<code>  8 * cmove</code><br />
<code>;</code><br />
<br />
Will copy the udg data to actual udgs and you'd use it e.g. as <code>udgs 0 udg 1 initUdgs</code> . <br />
<br />
You can't easily display all the udgs, <code>1 emit </code>will display the pacman, but <code>0 emit</code> will display nothing, because emit treats some character codes (such as 9 and 13) in a special way. In later FIGnition firmware we can display the full set of characters by adding 256: <code>256 emit</code> will display UDG 0. Or we could use <code>ic!</code> to store the values directly into video ram (the equivalent of poke if you were used to basic in the good-old days ;-) )<br />
<br />
<code>: xy@ ( x y -- VRamAddress)</code><br />
<code>  25 * + vram +</code><br />
<code>;</code><br />
<br />
So, <code>0 12 8 xy@ ic!</code> would put the invader half-way across the top third of the screen - plenty of time to shoot him down ;-) ! <code>12 8 at 256 emit</code> would do the same thing.<br />
<br />
<code>xy@</code> can also be used to read the screen, so you can test for collisions. <code>12 8 xy@ ic@</code> would now return 0, the character code of the invader!<br />
<br />
<a name="time"><h4><a name="TOC-Time"></a>Time</h4></a>
<br />
Handling time is pretty easy in FIGnition Forth. A 50Hz clock is provided (60Hz for NTSC FIGnitions) and it's called clock.<br />
<br />
<code>clock i@</code><br />
<br />
It displays the number of 50ths of a second since FIGnition was turned on. Often you want to be able to do some processing for a given time period and this is simple to implement.<br />
<br />
<div class="sites-codeblock sites-codesnippet-block"><font size="2"><code>: setTimeout ( ticks -- timeout)<br />
  clock i@ +<br />
;<br />
<br />
: timeout ( timeout -- boolean)</code><br />
<code>  clock i@ - 0&lt;</code><br />
<code>;</code></font></div>
<br />
 For example, setTimeout and timeout can be used to create a simple pause command.<br />
<br />
<div class="sites-codeblock sites-codesnippet-block"><font size="2"><code>: pause ( ticks -- )</code><br />
<code>  setTimeout</code><br />
<code>  begin</code><br />
<span><code>    dup timeout</code><br />
<code>  until drop</code><br />
<code>;</code></span></font></div>
<br />
Which simply waits for the given number of ticks, e.g. <code>50 pause</code> waits for 1s.<br />
<br />
<a name="avrHardware"><h4><a name="TOC-Internal-Peripherals"></a>Internal Peripherals</h4></a>
In theory, it's easy to access the internal peripherals on FIGnition. <i>@TODO</i><br />
<br />
For example, the eeprom can be read using the following simple routine:<br />
<br />
<div class="sites-codeblock sites-codesnippet-block"><font size="2"><code>: ec@</code><br />
<code>  dup 65 ic!</code><br />
<code>  8 &gt;&gt; 66 ic! ( little-endian)<br />
  1 63 ic! ( start the eeprom read)<br />
</code><code>  64 ic@ ( read the eeprom)</code><br />
<code>;</code></font></div>
<br />
<a name="textProcessing"><h4><a name="TOC-Text-Processing"></a>Text Processing</h4></a> With Firmware 0.9.7 FIGnition has now become much better at handling text, through the editor which uses 'C'-style '\0' terminated strings.<br /><br />So, here's how to do C's strlen, strcat, strcpy (or BASIC's MID$, LEFT$, RIGHT$, or Sinclair Basic x$([start] TO [end] powerful string slicing syntax).<br />
<br />
Firstly it's often useful to be able to enter ascii characters, e.g. for emit or delimiters. This little command (which can also be found on a Jupiter-Ace):<br />
<br />
<code>: ascii</code><br />
<code>  32 word here 1+ c@</code><br />
<code>  state @ if</code><br />
<code>    44 c, c,</code><br />
<code>  then</code><br />
<code>
; immediate</code><br />
<br />
Converts an ascii character to its character code. You can use it directly, for example:<br />
<br />
<code>ascii $ . 36  OK</code><br />
<br />
And you can use it inside another definition:<br />
<br />
<code>: x ascii B . ;</code><br />
<br />
Which is the same as doing <code>: x 66 . ;</code> .<br />
<br />
The new firmware implements:<br /><br /><code>"len ( str -- len)</code><br /><br />which takes as input a zero-terminated string and returns its length. Thus we can copy a string with the command:<br />
<br />
<code>: "! ( str1 str2 -- ) over "len cmove ;</code><br />
<br />
<code>str "len +</code> returns the end of a string, thus:<br />
<br />
<code>: "+ ( str1 str2 -- ) "len + "! ;</code><br />
<br />
Concatenates strings. Other string functions are similarly simple, truncating a string to n characters is:<br />
<br />
<code>: "cut ( str1 n --) + 0 swap c! ;</code><br />
<br />
Note, this will work even if the original string was shorter than n chars.<br />
<br />
A string starting at the nth character is: simply <code>str n +</code> (which is also a string). But since that won't work if n &gt; the length of the string it's better to implement:<br />
<br />
<code>: "from ( str1 n -- str ) over "len min + ;</code><br />
<br />
You can (with a bit of thought combine them):<br />
<br />
<code>str 5 "from 3 "cut str "!</code> (which will extract the 5th to 8th characters of str and copy it back to the string).<br />
<br />
Displaying a zero-terminated string can be done with:<br />
<br />
<code>: ". ( str --) "len type ;</code><br />
<br />
This is OK, but until now it was hard to actually input strings from FIGnition Forth, thus with games it was hard to have high scores and do other kinds of input, for example generating forms that involved text entry. Now it's EASY!!<br />
<br />
Firstly, we can input strings directly into the terminal input buffer using query, since query now just uses the new editor. For example:<br />
<br />
<code>query tib @ 1+ "len .</code><br />
<br />
Allows you to input some text and when you've finished (using Shift, Enter) it'll return the length.<br />
<br />
Query is simple, you can easily use it to input text and copy it to your own strings:<br />
<br />
<code>0 var myStr 80 allot</code><br /><code>
query tib @ 1+ myStr "!</code><br />
<br />
(assuming you've defined "!). Of course, you can treat the tib as a temp 79 char string pretty much as you like too from within your own code.<br />
<br />
Although query is simple, it's a bit restrictive; text input is always at the bottom of the screen and is always copied to the 79 character tib. So, boxed has been defined which allows you to define a text edit box anywhere on the screen and input text into any string of your own:<br />
<br />
<code>0 var str2 20 allot</code><br /><code>
0 str2 ! ( init)</code><br /><code>
5 5 at ( set the origin for the text box)</code><br /><code>
str2 18 8 2 boxed ( buff maxLen width height --)</code><br />
<br />
The initial <code>0 str2 !</code> is used to initialize the text and the text proper starts at <code>str2 1+</code> . If you don't initialize the text it'll use the previous text already in the string; thus you can use it to modify a string with user input as well as input new strings (which is better than BASIC generally allowed).<br />
<br />
One caveat: edited text always starts at str 1+ , that's because the text editor uses '\0' to terminate strings at both ends - the paragraph searching algorithm expects this.<br />
<br />
FIGnition Forth now also supports a primitive string searching function <code>cIn" ( dir buff ch -- buff' )</code> which searches for ch in the direction dir (-1 or +1) and returns the address where it was found, or where '\0' was found. "len is defined in terms of cIn", it's : "len 1 swap 0 cIn" ;<br /><br />Constant strings can be entered into programs. For the moment, this command will work (it's more complex than I'd like it to be, because it has to convert from Forths traditional strings to zero-terminated strings) but in the near future, <code>,"</code> will be built-in:<br /><br /><code>: ," 34 word here dup c@ dup &gt;r 1+ allot dup 1+ swap r&gt; 1+ cmove 0 here 1- c! ;</code><br />
<br />
Allows you to enter constant strings by combining it with cdata. For example:<br />
<br />
<code>cdata myMsg1 ," Hello you!"</code><br />
<code>cdata myMsg2 ," Goodbye!"</code><br />
<code>cdata myMsg3 ," Buy a FIGnition for a friend!"</code><br />
<br />
You can then combine it with data to create an array of references to messages:<br />
<br />
<code>data myMsgs myMsg1 , myMsg2 , myMsg3 ,</code><br />
<br />
<code>: rndMsg 3 rnd myMsgs ". ;</code><br />
<br />
<br /></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<div id="sites-attachments-container">
</div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter" role="navigation"><p><a class="sites-system-link" href="https://accounts.google.com/AddSession?continue=https://sites.google.com/site/libby8dev/fignition/documentation/code-it/extra-definitions&amp;service=jotspot">Sign in</a><span aria-hidden="true">|</span><a class="sites-system-link" href="/site/libby8dev/system/app/pages/recentChanges">Recent Site Activity</a><span aria-hidden="true">|</span><a class="sites-system-link" href="https://sites.google.com/site/libby8dev/system/app/pages/reportAbuse" target="_blank">Report Abuse</a><span aria-hidden="true">|</span><a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a><span aria-hidden="true">|</span><span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com/site">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="https://ssl.gstatic.com/sites/p/4edc19/system/js/jot_min_view__en_gb.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/site/libby8dev/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("2bd", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_2bd');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/u/0/d/AAHRpnXsPxZjbAZh3TEOF-thhM7zMcxeaMaSk6GP8gH-DLFn73JgFlrsh-ANh0ePKzxFRHk-EN3MyGShXDAV0l0UjnN5b424h2GK6IWTkSXhcKjAwfIl75IJjF59PPCXzDAxooxK5JF6c/api/js?token=AGNctVb2tegahoM07OhYcnqSU0OMH5oTGQ:1562360681283',
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type + ",user_page";
                      window.jstiming.report(loadTimer, {}, 'https://gg.google.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false,
            false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en_GB");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
  //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
          JOT_setupPostRenderingManager();
        </script>
<script type="text/javascript">
          JOT_postEvent('renderPlus', null, 'sites-chrome-main');
        </script>
<script type="text/javascript">
          sites.codeembed.init();
        </script>
<div id="server-timer-div" style="display:none"> </div>
<script type="text/javascript">
          window.jstiming.load.tick('render');
          JOT_postEvent('usercontentrendered', this);
        </script>
</body>
</html>
